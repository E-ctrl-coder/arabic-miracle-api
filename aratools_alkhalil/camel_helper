# aratools_alkhalil/camel_helper.py

from camel_tools.morphology.analyzer import Analyzer

# instantiate once at import
_analyzer = Analyzer.builtin_analyzer()

def analyze_with_camel(word: str) -> list[dict]:
    """
    Returns a list of analyses in your appâ€™s schema:
    { root, pattern, prefixes, suffixes, stem, pos }
    """
    results = []
    for a in _analyzer.analyze(word):
        results.append({
            'root':     a.get('root',''),
            'pattern':  a.get('pattern',''),
            'prefixes': a.get('prefixes',[]) or [],
            'suffixes': a.get('suffixes',[]) or [],
            'stem':     a.get('stem',''),
            'pos':      a.get('pos',''),
        })
    return results
